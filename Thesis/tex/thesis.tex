\documentclass[10pt,a4paper,twoside]{book}

% Standard packages
\usepackage{palatino}
\usepackage{microtype}
\usepackage[english]{babel}
\usepackage[parfill]{parskip}
\raggedbottom
\usepackage{tocbibind}
\usepackage{xspace}
\usepackage[bottom]{footmisc}
\usepackage{tocloft}
\usepackage{fancyhdr}
\usepackage{amsmath}

% Colors
\usepackage[usenames]{color}
\definecolor{red}{rgb}{0.8,0,0}
\definecolor{blue}{rgb}{0,0,0.7}
\definecolor{lightgreen}{rgb}{0,1,0}
\definecolor{green}{rgb}{0,0.7,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{yellow}{rgb}{1,1,0}

% Listings
\usepackage{listings}
\lstdefinelanguage{smalltalk}{
  string=[d]",
  comment=[s]{<}{>},
  literate=
    {^}{{$\uparrow$}}1
    {-->}{{$\longrightarrow$}}3
    {~}{{$\sim$}}1
  ,
  tabsize=5
}[keywords,comments,strings]
\lstset{
%  language=smalltalk,
%  basicstyle=\sffamily\small,
  basicstyle=\ttfamily\scriptsize,
%  commentstyle=\color{blue}\bfseries,
%  stringstyle=\color{green}\it,
  showstringspaces=false,
%  keepspaces=true,
  breaklines=true,
%  breakautoindent=true,
%  columns=fullflexible
}
\newcommand{\st}{\lstinline}
\lstnewenvironment{stcode}{
  \lstset{frame=lines}
}{}
\lstnewenvironment{stlisting}[2]{
  \lstset{
    frame=lines,
    caption={#1},
    label={listing:#2}
  }
}{}
\renewcommand{\lstlistoflistings}{
  \begingroup
    \tocfile{Listings}{lol}
  \endgroup
}


% Page geometry
\usepackage[
	papersize={6.5in,9in},
	hmargin={0.65in,0.65in},
	vmargin={0.75in,0.75in},
	ignoreheadfoot
]{geometry}

% Date formatting
\usepackage{fmtcount}
\usepackage[nodayofweek]{datetime}

% Graphics
\usepackage{graphicx}
\graphicspath{{images/}}
\DeclareGraphicsExtensions{{.pdf}}

% Constants for pdf and front page
\newcommand{\thesistitle}{Codemap}
\newcommand{\thesisauthor}{David Samuel Erni}
\newcommand{\thesissubtitle}{codemap codemap codemap codemap codemap}


% Hyperlinks
\usepackage[pdftex,colorlinks=true,pdfstartview=FitV,
 linkcolor=black,citecolor=black,urlcolor=black]{hyperref}
\hypersetup{
  a4paper,
  colorlinks,
  breaklinks=true,
  linkcolor=red,
  anchorcolor=red,
  citecolor=red,
%  pagecolor=red,
  urlcolor=magenta,
%  pagecolor=darkblue,
  pdftitle={\thesistitle},
  pdfauthor={\thesisauthor},
  pdfsubject={\thesissubtitle},
%  pdfcreator={\LaTeX},
%  pdfkeywords={\thesiskeywords},
%  bookmarksopen=true,
%  bookmarksopenlevel=2
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Markup macros for proof-reading
\usepackage[normalem]{ulem} % for \sout
\usepackage{xcolor}
\newcommand{\ra}{$\rightarrow$}
\newcommand{\ugh}[1]{\textcolor{red}{\uwave{#1}}} % please rephrase
\newcommand{\ins}[1]{\textcolor{blue}{\uline{#1}}} % please insert
\newcommand{\del}[1]{\textcolor{red}{\sout{#1}}} % please delete
\newcommand{\chg}[2]{\textcolor{red}{\sout{#1}}{\ra}\textcolor{blue}{\uline{#2}}} % please change

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Put edit comments in a really ugly standout display
\usepackage{ifthen}
\usepackage{amssymb}
\newboolean{showcomments}
\setboolean{showcomments}{true} % toggle to show or hide comments
\ifthenelse{\boolean{showcomments}}
  {\newcommand{\marking}[3]{
	% \fbox{\bfseries\sffamily\scriptsize#1}
	\fcolorbox{gray}{#3}{\bfseries\sffamily\scriptsize#1}
    {\sf\small$\blacktriangleright$\textit{#2}$\blacktriangleleft$}
    % \marginpar{\fbox{\bfseries\sffamily#1}}
   }
   %\newcommand{\version}{\emph{\scriptsize$-$Id: main.tex 25396 2009-03-12 12:37:59Z matter $-$}}
   \newcommand{\version}{}
  }
  {\newcommand{\marking}[3]{}
   \newcommand{\version}{}
  }
\newcommand{\note}[2]{\marking{#1}{#2}{yellow}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% easier referencing
\newcommand{\secref}[1]{\autoref{sec:#1}}
\newcommand{\figref}[1]{\autoref{fig:#1}}
\newcommand{\tabref}[1]{\autoref{tab:#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% use these to annotate your document
\newcommand{\chk}[1]{\marking{check}{#1}{lightgreen}}
\newcommand{\todo}[1]{\note{todo}{#1}}
\newcommand{\done}[1]{\note{done}{#1}}
%\newcommand{\done}[1]{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% abbreviations
\newcommand{\ie}{\emph{i.e.}\xspace}
\newcommand{\eg}{\emph{e.g.}\xspace}
\newcommand{\etc}{\emph{etc.}\xspace}
\newcommand{\cf}{\emph{cf.}\xspace}
\newcommand{\etal}{et\ al.\xspace}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% names
\newcommand{\VOC}{vocabulary\xspace}
\newcommand{\VOCs}{vocabularies\xspace}
\newcommand{\cmap}{Codemap\xspace}
\newcommand{\MDS}{Multidimensional Scaling\xspace}
\newcommand{\LSI}{Latent Semantic Indexing\xspace}
\newcommand{\TOOL}{\textsc{SoftwareCartographer}\xspace}
\newcommand{\SOCA}{Software Cartography\xspace}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MAIN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

%========================================
\frontmatter
\include{parts/front/front}
\include{parts/front/abstract}
\include{parts/front/ack}
\cleardoublepage
 
\tableofcontents
\label{chapter:contents}
\newpage
\cleardoublepage

%========================================
\mainmatter

\include{parts/main/intro}
\include{parts/main/relatedwork}
\include{parts/main/soca}
\include{parts/main/codemap}
\include{parts/main/casestudy}
\include{parts/main/discussion}

%========================================
\appendix
\include{parts/back/appendix}

\listoffigures
\lstlistoflistings
\listoftables
\clearpage

%========================================
\backmatter
\include{parts/back/bib}

\end{document}
